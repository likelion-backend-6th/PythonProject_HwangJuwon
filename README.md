# PythonProject_HwangJuwon

## 1. 미션 요구사항 체크리스트



---

<b>DB 테이블 구성</b><br>
- [X]도서 정보 테이블, 대출 정보 테이블 만들기[o]
<b>CLI 기반 메뉴</b><br>
- [X]메뉴 인터페이스 작성<br>
- [X]입력으로 메뉴 수행 로직<br>
- [X]기능 수행 후 메뉴로 돌아오기<br>

<b>데이터 입력 기능</b><br>
- [X]콘솔로 도서 정보 DB에 저장<br>
- [X]csv, xml, json 등의 파일로 도서의 정보를 입력 가능

<b>도서 정보 조회 기능</b><br>
- [X]콘솔 조작으로 도서 정보 조회 (id 또는 이름 입력)<br>
- [X]도서 정보는 도서 ID, 이름, 저자, 출판사, 대출 가능 여부 포함<br>
- [X]도서가 대출중인 경우 도서의 대출 정보 함께 출력

<b>도서 대출 기능</b><br>
- [X]콘솔 조작으로 도서 대출<br>
- [X]대출중인 도서일 경우 대출이 불가능하다고 출력

<b>도서 반납 기능</b><br>
- [X]콘솔 조작으로 반납을 원하는 도서 반납 [o]

<b>대출 정보 조회 기능</b><br>
- [X]대출중인 도서 모두 출력하는 기능<br>
- [X]대출 정보는 도서 ID, 이름, 저자, 출판사, 대출 날짜, 반납일자로 구성<br>
- [X]대출 정보는 대출 날짜를 기준으로 내림차순으로

<b>종료 기능</b><br>
- [X]프로그램 종료 기능


## 2. 미션 진행 & 회고

---

### 2-1. 미션 진행 내용 요약

---


DB 테이블 작성
- 테이블의 값들 중 ID는 직접 주지 않고 자동으로 1씩 늘어나게, 대출 가능 여부는 책 생성시 기본적으로
  대출 가능한 상태로 만들고 싶었다.
  [이 글](https://lovethefeel.tistory.com/57)을 참고하여 테이블 작성 때 ID를 자동으로 1씩 증가하게, 그리고 직접 넣을수도 있게 만드는 방법
  을 알았다.

도서 테이블 
- library=# create table books (<br>
    library(# id int generated by default as identity unique primary key,<br>
    library(# title varchar(100) not null,<br>
    library(# author varchar(50) not null,<br>
    library(# publisher varchar(50) not null,<br>
    library(# loanable boolean not null default TRUE);
  
대출 테이블
- library=# create table loans (<br>
    library(# loan_id int generated by default as identity unique primary key,<br>
    library(# book_id int not null,<br>
    library(# loan_date date not null,<br>
    library(# return_date date,<br>
    library(# constraint fk_book_id foreign key(book_id) references "books"(id));
  
CLI 기반 메뉴
- 일단 함수 형태로 메인메뉴 구성을 해 놓고 기능의 동작이 끝날때마다 메인메뉴 함수를 불러오는 방식
  으로 구성했다.
  
도서 조회 메뉴
- 도서 조회 쿼리를
      try: 
        int(find)
        DB.cur.execute(f"SELECT * FROM Books WHERE id='{find}';")
    except ValueError:
        DB.cur.execute(f"SELECT * FROM Books WHERE title='{find}';")
  이렇게 작성해 봤다. int로 바꿀 수 없는 형식이 입력되면 책 제목이 입력되었다고 판단하여 제목으로
  검색하는 방식인데 만약 책 제목이 숫자로만 되어있는 경우가 있다면 어떻게 해야할까..

도서 대출 메뉴
- loans 테이블에 빌린 날짜를 저장할 때 
  INSERT INTO loans (book_id, loan_date) VALUES (find, cast(now() as date));
  라는 쿼리를 사용했다. postgreSQL의 내장함수인 now()는 현재 시간을 출력하는데 이를 date 형식으로 
  변환하여 넣을 수 있다.
  
도서 반납 메뉴
- UPDATE를 두번 사용해서 입력받은 책의 대출 가능여부를 True로, 대출 정보에서 반환 일자를 추가하는 
  방식으로 구현했다.

대출 조회 메뉴
- select l.loan_id, l.book_id, b.title, l.loan_date from loans l, books b where 
  l.book_id=b.id and b.loanable=false;
  쿼리를 사용해서 대출 불가능한 책 중에서 책 정보를 가져오는 쿼리를 작성했다.




### 2-2. 회고

---

일단 요구 명세에 있는 모든 기능을 개발해보겠다는 생각으로 프로젝트를 시작했다.
기능을 만드는 것 자체는 그렇게 어려운 일은 아니였는데 사용자가 보기 좋게 다듬는 일이 상당히 어려웠다.<br>
피어리뷰 과정에서 다른 분들의 구현 방식을 보며 이렇게도 할 수 있었겠구나 하는 생각이 상당히 많이 들어 앞으로의 개발에 도움이 될 것 같다.